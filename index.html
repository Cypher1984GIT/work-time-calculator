<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßÆ Work Time Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom max-width using arbitrary values from Tailwind JIT */
        .max-w-1000 {
            max-width: 1000px;
        }
        .animate-enter {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .animate-enter-active {
            opacity: 1;
            transform: translateY(0);
        }
        /* Estilo para las listas de preguntas */
        #result ul {
            list-style-position: inside;
            padding-left: 0;
        }
        #result li {
            position: relative;
            padding-left: 1.5em; /* Espacio para el √≠cono */
            margin-bottom: 0.5rem;
        }
        #result li::before {
            content: 'ü§î'; /* Emoji de reflexi√≥n */
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 flex items-center justify-center min-h-screen p-4 sm:p-6">

    <div class="w-full max-w-1000">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 sm:p-8">
            <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 dark:text-white mb-2">Work Time Calculator</h1>
            <p class="text-center text-gray-500 dark:text-gray-400 mb-8">Find out how much time what you buy really costs you.</p>

            <form id="calculatorForm" class="space-y-6">
                <div>
                    <label for="currency" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Currency</label>
                    <select id="currency" name="currency" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        <option value="USD">$ USD (United States Dollar)</option>
                        <option value="EUR">‚Ç¨ EUR (Euro)</option>
                        <option value="ARS">$ ARS (Argentine Peso)</option>
                        <option value="COP">$ COP (Colombian Peso)</option>
                        <option value="MXN">$ MXN (Mexican Peso)</option>
                    </select>
                </div>

                <div>
                    <label for="itemPrice" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Product or service price</label>
                    <input type="number" id="itemPrice" name="itemPrice" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Ex: 599" required step="any" oninvalid="this.setCustomValidity('Please enter a valid number.')" oninput="this.setCustomValidity('')">
                </div>

                <div>
                    <label for="salary" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Your salary (net)</label>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <input type="number" id="salary" name="salary" class="w-full sm:w-2/3 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Ex: 1500" required step="any" oninvalid="this.setCustomValidity('Please enter a valid number.')" oninput="this.setCustomValidity('')">
                        <select id="salaryPeriod" name="salaryPeriod" class="w-full sm:w-1/3 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                            <option value="monthly">per month</option>
                            <option value="hourly">per hour</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="hoursPerDay" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Hours per day</label>
                        <input type="number" id="hoursPerDay" name="hoursPerDay" value="8" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" required step="any" oninvalid="this.setCustomValidity('Please enter a valid number.')" oninput="this.setCustomValidity('')">
                    </div>
                    <div>
                        <label for="daysPerWeek" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Days per week</label>
                        <input type="number" id="daysPerWeek" name="daysPerWeek" value="5" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" required step="any" oninvalid="this.setCustomValidity('Please enter a valid number.')" oninput="this.setCustomValidity('')">
                    </div>
                </div>

                <!-- Secci√≥n de Compra a Cr√©dito -->
                <div class="pt-2 space-y-3">
                    <div class="relative flex items-start">
                        <div class="flex h-6 items-center">
                            <input id="creditCheckbox" name="credit" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600 dark:bg-gray-700 dark:border-gray-600">
                        </div>
                        <div class="ml-3 text-sm leading-6">
                            <label for="creditCheckbox" class="font-medium text-gray-700 dark:text-gray-300">Bought on credit?</label>
                        </div>
                    </div>
                    <div id="creditDetailsContainer" class="hidden animate-enter grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="interestRate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Annual interest (%)</label>
                            <input type="number" id="interestRate" name="interestRate" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Ex: 29.5" step="any" oninvalid="this.setCustomValidity('Please enter a valid number.')" oninput="this.setCustomValidity('')">
                        </div>
                        <div>
                            <label for="installments" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Number of installments</label>
                            <input type="number" id="installments" name="installments" class="w-full p-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Ex: 12" step="1" oninvalid="this.setCustomValidity('Please enter a whole number.')" oninput="this.setCustomValidity('')">
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2">
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 transition-all duration-300 transform hover:scale-105">
                        Calculate work hours
                    </button>
                    <button type="button" id="clearButton" class="w-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-700 transition-all duration-300">
                        Clear
                    </button>
                </div>
            </form>

            <div id="result" class="mt-8">
                <!-- El resultado aparecer√° aqu√≠ -->
            </div>
        </div>
        <footer class="text-center mt-6 text-sm text-gray-500 dark:text-gray-400">
            <p>Created by Cypher with ‚ù§Ô∏è to help you make better financial decisions.</p>
        </footer>
    </div>

    <script>
        const form = document.getElementById('calculatorForm');
        const resultDiv = document.getElementById('result');
        const currencySelect = document.getElementById('currency');
        const clearButton = document.getElementById('clearButton');
        const creditCheckbox = document.getElementById('creditCheckbox');
        const creditDetailsContainer = document.getElementById('creditDetailsContainer'); // ID is correct, just for reference
        const interestRateInput = document.getElementById('interestRate');
        const installmentsInput = document.getElementById('installments');
        
        let lastResultData = null;

        const WEEKS_PER_MONTH = 4.33;
        
        const currencySymbols = {
            USD: '$',
            EUR: '‚Ç¨',
            MXN: '$',
            COP: '$',
            ARS: '$'
        };

        const reflectiveQuestions = [
            "Does this expense align with my long-term financial goals?",
            "Will the happiness this purchase brings me last longer than the hours I invested to earn it?",
            "Is there a cheaper or free alternative that would give me similar satisfaction?",
            "Does buying this bring me closer to or further from financial freedom?",
            "If I waited a month, would I still want to make this purchase with the same intensity?",
            "What else could I do with this money that would benefit me more in the future?",
            "Is this a real need or an impulsive desire?",
            "Am I making this purchase to impress others or for my own well-being?",
            "Have I considered the maintenance costs or associated expenses of this purchase?",
            "Could I invest these work hours in learning a new skill or a personal project?",
            "How will I feel about this purchase in a year?",
            "Will this purchase add real value to my life, or is it a superfluous expense?",
            "Do I really need this right now, or can I postpone the purchase?",
            "Will this product or service solve a real problem or just give me temporary gratification?",
            "Does the impact it will have on my life (in my time, space, or routine) justify its cost?",
            "Am I buying the most expensive version when a cheaper one would serve the same function?",
            "Does this expense fit into my monthly budget without affecting my savings?",
            "How much real use will I get out of this purchase?",
            "Is there a way to get a similar benefit without making the full purchase (e.g., renting, trying an alternative)?",
            "Will this purchase force me to make other additional expenses in the future?",
            "Is this expense an investment in my future or a simple whim?",
            "How does this expense compare to the progress towards my savings goals?",
            "If I were given the value of this purchase in cash right now, would I still make it?",
            "Am I buying this out of boredom or genuine need?",
            "Can I achieve the same result or feeling without spending this money?",
            "What would my future self say about this purchasing decision?",
            "Have I checked reviews or looked for alternatives before deciding?",
            "Will this expense bring me financial stress later on?",
            "Is the value it provides proportional to the life-time I am exchanging for it?",
            "Am I sacrificing a future experience (like a trip) for this present purchase?"
        ];

        function getRandomQuestions(count) {
            const shuffled = [...reflectiveQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }
        
        function resetCalculator() {
            form.reset();
            resultDiv.innerHTML = '';
            lastResultData = null;
            creditDetailsContainer.classList.add('hidden');
        }

        form.addEventListener('submit', function(event) {
            event.preventDefault();

            const itemPrice = parseFloat(document.getElementById('itemPrice').value);
            const salary = parseFloat(document.getElementById('salary').value);
            const salaryPeriod = document.getElementById('salaryPeriod').value;
            const hoursPerDay = parseFloat(document.getElementById('hoursPerDay').value);
            const daysPerWeek = parseFloat(document.getElementById('daysPerWeek').value);
            const isCredit = creditCheckbox.checked;
            const interestRate = parseFloat(interestRateInput.value);
            const installments = parseInt(installmentsInput.value, 10);

            if (isNaN(itemPrice) || isNaN(salary) || isNaN(hoursPerDay) || isNaN(daysPerWeek) ||
                itemPrice <= 0 || salary <= 0 || hoursPerDay <= 0 || daysPerWeek <= 0) {
                displayError('Make sure to fill all fields with positive numbers.');
                lastResultData = null;
                return;
            }

            const hoursPerWeek = hoursPerDay * daysPerWeek;

            let totalPrice = itemPrice;
            let interestAmount = 0;
            let monthlyPayment = 0;
            let hoursForInterest = 0;

            if (isCredit) {
                if (isNaN(interestRate) || interestRate < 0 || isNaN(installments) || installments <= 0) {
                    displayError('Please enter a valid interest rate and number of installments.');
                    return;
                }
                // C√°lculo de inter√©s simple: Capital * Tasa Anual * (Tiempo en A√±os)
                interestAmount = itemPrice * (interestRate / 100) * (installments / 12);
                totalPrice = itemPrice + interestAmount;
                monthlyPayment = totalPrice / installments;
            }

            let hourlyRate;
            switch (salaryPeriod) {
                case 'hourly':
                    hourlyRate = salary;
                    break;
                case 'monthly':
                    hourlyRate = salary / (hoursPerWeek * WEEKS_PER_MONTH);
                    break;
            }

            if (hourlyRate <= 0 || !isFinite(hourlyRate)) {
                displayError('With the provided work schedule, an hourly wage cannot be calculated. Please check the hours and days.');
                lastResultData = null;
                return;
            }

            if (isCredit && hourlyRate > 0) {
                hoursForInterest = interestAmount / hourlyRate;
            }

            const hoursNeeded = totalPrice / hourlyRate;
            
            const randomQuestions = getRandomQuestions(3);
            const questionsHTML = `<ul>${randomQuestions.map(q => `<li>${q}</li>`).join('')}</ul>`;
            
            const suggestionsHTML = `
                <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Before you buy, ask yourself:</h4>
                <div class="text-sm text-gray-700 dark:text-gray-300">${questionsHTML}</div>
            `;

            lastResultData = {
                hours: hoursNeeded,
                rate: hourlyRate,
                itemPrice: itemPrice,
                isCredit: isCredit,
                interestAmount: interestAmount,
                installments: installments,
                monthlyPayment: monthlyPayment,
                hoursForInterest: hoursForInterest,
                totalPrice: totalPrice,
                suggestionsHTML: suggestionsHTML,
                hoursPerDay: hoursPerDay
            };
            
            displayResult(currencySelect.value);
        });

        currencySelect.addEventListener('input', function() {
            if (lastResultData) {
                displayResult(this.value);
            }
        });
        
        ['itemPrice', 'salary', 'salaryPeriod', 'hoursPerDay', 'daysPerWeek', 'interestRate', 'installments'].forEach(id => {
            document.getElementById(id).addEventListener('input', () => {
                lastResultData = null;
                resultDiv.innerHTML = '';
            });
        });

        creditCheckbox.addEventListener('change', function() {
            resultDiv.innerHTML = '';
            if (this.checked) {
                creditDetailsContainer.classList.remove('hidden');
                requestAnimationFrame(() => creditDetailsContainer.classList.add('animate-enter-active'));
            } else {
                creditDetailsContainer.classList.remove('animate-enter-active');
                creditDetailsContainer.classList.add('hidden');
                interestRateInput.value = '';
                installmentsInput.value = '';
            }
        });

        clearButton.addEventListener('click', resetCalculator);

        window.addEventListener('load', resetCalculator);

        function displayResult(currentCurrency) {
            if (!lastResultData) return;

            const { hours, rate, itemPrice, isCredit, interestAmount, installments, monthlyPayment, hoursForInterest, totalPrice, suggestionsHTML, hoursPerDay } = lastResultData;
            const formattedResult = formatTime(hours, hoursPerDay);
            const symbol = currencySymbols[currentCurrency];

            let priceDetailsHTML = `
                <p class="text-sm text-gray-600 dark:text-gray-300">This is the time you need to work to earn <span class="font-semibold">${symbol}${totalPrice.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>.</p>
            `;

            if (isCredit) {
                const formattedMonthly = monthlyPayment.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                const formattedInterestTime = formatTime(hoursForInterest, hoursPerDay, true);
                priceDetailsHTML = `
                    <div class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
                        <p>Product price: <span class="font-medium">${symbol}${itemPrice.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></p>
                        <p>Credit interest: <span class="font-medium">+ ${symbol}${interestAmount.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></p>
                        <p class="mt-1">Total cost (in ${installments} installments): <span class="font-semibold">${symbol}${totalPrice.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></p>
                        <p class="mt-2 text-red-600 dark:text-red-400">‚Ü≥ Extra time for credit: <span class="font-bold">${formattedInterestTime}</span></p>
                        <p class="mt-2 pt-2 border-t border-blue-200 dark:border-gray-600">Estimated monthly payment: <span class="font-bold text-blue-700 dark:text-blue-300">${symbol}${formattedMonthly}</span></p>
                    </div>`;
            }

            resultDiv.innerHTML = `
                <div class="bg-blue-50 dark:bg-gray-700 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-lg animate-enter">
                    <h3 class="text-lg font-bold text-blue-900 dark:text-white">Calculation Result:</h3>
                    <p class="text-2xl md:text-3xl font-bold text-blue-700 dark:text-blue-300 my-2">${formattedResult}</p>
                    ${priceDetailsHTML}
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">(Based on an hourly wage of ${symbol}${rate.toFixed(2).toLocaleString('en-US')})</p>
                    
                    <div class="mt-4 pt-4 border-t border-blue-200 dark:border-gray-600">
                        ${suggestionsHTML || ''}
                    </div>
                </div>
            `;
            const resultElement = resultDiv.querySelector('.animate-enter');
            requestAnimationFrame(() => resultElement.classList.add('animate-enter-active'));
        }
        
        function displayError(message) {
             resultDiv.innerHTML = `
                <div class="bg-red-50 dark:bg-gray-700 border-l-4 border-red-500 dark:border-red-400 p-4 rounded-lg animate-enter">
                    <p class="text-red-700 dark:text-red-300 font-medium">${message}</p>
                </div>
            `;
            const errorElement = resultDiv.querySelector('.animate-enter');
            requestAnimationFrame(() => errorElement.classList.add('animate-enter-active'));
        }

        function formatTime(totalHours, hoursPerDay, isSubResult = false) {
            if (totalHours < 1) {
                const minutes = totalHours * 60;
                return `${minutes.toFixed(0)} minutes`;
            }
            
            const hoursText = `${totalHours.toFixed(1)} hours`;
            const daysSpanClass = isSubResult ? "font-semibold" : "text-lg md:text-xl text-blue-600 dark:text-blue-400";

            if (hoursPerDay > 0 && totalHours >= hoursPerDay) {
                const days = totalHours / hoursPerDay;
                return `${hoursText} <span class="${daysSpanClass}">(~${days.toFixed(1)} days)</span>`;
            }
            return hoursText;
        }
    </script>

</body>
</html>
